{% extends "base.html" %}
<h1></h1>
{% block title %}Home - Dwiggy{% endblock %}
<h1></h1>
{% block content %} {% load static %}
<section class="max-w-3xl mx-auto p-6 bg-white">
  <h1 class="text-2xl font-bold mb-4">Vendor Dashboard</h1>
  <form
    id="vendor-form"
    method="POST"
    enctype="multipart/form-data"
    class="space-y-6"
  >
    {% csrf_token %}

    <div>
      <label for="name" class="block text-sm font-medium text-gray-700"
        >Name</label
      >
      <input
        type="text"
        id="name"
        name="name"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
      />
    </div>

    <div>
      <label for="description" class="block text-sm font-medium text-gray-700"
        >Description</label
      >
      <textarea
        id="description"
        name="description"
        rows="3"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
      ></textarea>
    </div>

    <div>
      <label for="address" class="block text-sm font-medium text-gray-700"
        >Address</label
      >
      <input
        type="text"
        id="address"
        name="address"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
      />
    </div>

    <div>
      <label for="phone" class="block text-sm font-medium text-gray-700"
        >Phone</label
      >
      <input
        type="text"
        id="phone"
        name="phone"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
      />
    </div>

    <div>
      <label for="image" class="block text-sm font-medium text-gray-700"
        >Image</label
      >
      <img
        id="preview"
        src=""
        alt="Vendor Image"
        class="my-3 max-w-xs rounded shadow-md"
      />
      <input
        type="file"
        id="image"
        name="image"
        accept="image/*"
        class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100"
      />
    </div>

    <button
      onclick="updateVendorProfile()"
      id="update-btn"
      class="w-full py-2 px-4 bg-orange-600 text-white rounded-md shadow-sm hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
    >
      Update Profile
    </button>
  </form>
</section>

<script>
  const imageInput = document.getElementById("image");
  const preview = document.getElementById("preview");

  imageInput.addEventListener("change", () => {
    const file = imageInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        preview.src = e.target.result;
      };
      reader.readAsDataURL(file);
    } else {
      preview.src = "";
    }
  });
</script>
<script src="{% static 'scripts/utils.js' %}"></script>
<script>
  vendorProfile();
</script>
{% endblock %}
